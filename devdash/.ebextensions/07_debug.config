# .ebextensions/08_diagnose.config
container_commands:
  01_check_pg_config:
    command: |
      echo "Checking for pg_config..." > /var/log/pg_config_check.log
      which pg_config >> /var/log/pg_config_check.log 2>&1
      echo "PATH=$PATH" >> /var/log/pg_config_check.log
      echo "Installed packages:" >> /var/log/pg_config_check.log
      dnf list installed | grep -E 'postgres|pg|psql' >> /var/log/pg_config_check.log
      echo "Python version:" >> /var/log/pg_config_check.log
      python3 --version >> /var/log/pg_config_check.log
      echo "Pip version:" >> /var/log/pg_config_check.log
      pip3 --version >> /var/log/pg_config_check.log